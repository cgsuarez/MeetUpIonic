{"version":3,"sources":["../../node_modules/@angular/core/esm5 lazy","../../src lazy","../../src/pages/list/list.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/app/app.firebaseconfig.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 162;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/esm5 lazy\n// module id = 162\n// module chunks = 0","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 207;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 207\n// module chunks = 0","import { Component } from '@angular/core';\n\nimport { NavController, NavParams } from 'ionic-angular';\n\nimport { AngularFirestore, DocumentChangeAction, AngularFirestoreCollection } from 'angularfire2/firestore';\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/observable/fromPromise';\nimport 'rxjs/add/operator/map';\nimport 'rxjs/add/operator/concat';\nimport 'rxjs/add/operator/mergeMap';\nimport 'rxjs/add/operator/first';\nimport 'rxjs/add/observable/zip';\nimport 'rxjs/add/observable/concat';\nimport 'rxjs/add/observable/forkJoin';\nimport { Subscription } from \"rxjs/Subscription\";\nimport { v4 as uuid } from 'uuid';\n\nexport interface Item {\n  id: string,\n  description: string\n}\nexport interface SubItem {\n  id: string,\n  description: string\n}\n@Component({\n  selector: 'page-list',\n  templateUrl: 'list.html'\n})\nexport class ListPage {\n  public disposables: Subscription = new Subscription();\n  public items: Item[] = [];\n  public subItems: SubItem[][] = [];\n  public subItemsSubscriptions: Subscription[][] = [];\n\n  constructor(public navCtrl: NavController,\n    public navParams: NavParams,\n    public storage: AngularFirestore) {\n  }\n\n  public ionViewDidLoad() {\n    this.disposables.add(this.listItems()\n      .subscribe((items) => {\n        this.items = items;\n        this.resetSubItemsSubscriptions();\n      }, (error) => {\n        console.log(error);\n      }));\n  }\n\n  public ionViewWillUnload() {\n    this.disposables.unsubscribe();\n    this.clearSubItemsSubs();\n  }\n  private resetSubItemsSubscriptions() {\n    this.clearSubItemsSubs();\n    this.items.map((item) => {\n      this.subItemsSubscriptions[item.id] = this.listSubItems(item)\n        .subscribe((subs) => {\n          this.subItems[item.id] = subs;\n        }, (error) => {\n          console.log(error);\n        });\n    });\n  }\n  private clearSubItemsSubs() {\n    this.subItemsSubscriptions.forEach((subs) => {\n      subs.forEach((sub) => {\n        sub.unsubscribe();\n      })\n    })\n  }\n  public addOneItem() {\n    let id = uuid();\n    let item = {\n      id: id,\n      description: \" Item \" + id\n    };\n    this.addItem(item)\n      .subscribe(() => {\n        console.log(\"added item\");\n      }, (error) => {\n        console.error(error);\n      })\n  }\n\n  public removeOneItem(event: any, item: Item) {\n    event.stopPropagation();\n    this.removeItem(item)\n      .subscribe(() => {\n        console.log(\"removed item\")\n        this.subItemsSubscriptions[item.id].unsubscribe();\n      }, (error) => {\n        console.log(error);\n      })\n  }\n\n  public addOneSubItem(event: any, item: Item) {\n    event.stopPropagation();\n    let id = uuid();\n    this.addSubItem(item, {\n      id: id,\n      description: \" SubItem \" + id\n    }).subscribe(() => {\n      console.log(\"added subtem\")\n    }, (error) => {\n      console.log(error);\n    })\n  }\n\n\n  public user(): Observable<any> {\n    return Observable.of(\n      { uid: \"someId\" }\n    );\n  }\n\n  private itemsCol(userId: string): AngularFirestoreCollection<{}> {\n    return this.storage\n      .collection('users')\n      .doc(userId)\n      .collection('items')\n  }\n\n  private subItemsCol(userId: string, item: Item): AngularFirestoreCollection<{}> {\n    return this.itemsCol(userId)\n      .doc(item.id)\n      .collection('subitems')\n  }\n\n  private itemsSnap(): Observable<DocumentChangeAction[]> {\n    return this.user()\n      .flatMap((user) => {\n        return this.itemsCol(user.uid)\n          .snapshotChanges()\n      })\n  }\n\n  private subItemsSnap(item: Item): Observable<DocumentChangeAction[]> {\n    return this.user()\n      .flatMap((user) => {\n        return this.subItemsCol(user.uid, item)\n          .snapshotChanges()\n      })\n  }\n\n  public listItems(): Observable<Item[]> {\n    return this.itemsSnap()\n      .map((snaps) => {\n        console.log(snaps)\n        return snaps.filter((snap) => { return snap.type != \"removed\" })\n          .map((snap) => { return snap.payload.doc.data() })\n      })\n      .map((items: Item[]) => {\n        if (items == null) {\n          return [];\n        }\n        return items;\n      });\n  }\n\n  public listSubItems(item: Item): Observable<Item[]> {\n    return this.subItemsSnap(item)\n      .map((snaps) => {\n        console.log(snaps)\n        return snaps.filter((snap) => { return snap.type != \"removed\" })\n          .map((snap) => { return snap.payload.doc.data() })\n      })\n      .map((items: Item[]) => {\n        if (items == null) {\n          return [];\n        }\n        return items;\n      });\n  }\n\n  public addItem(item: Item): Observable<void> {\n    return this.user()\n      .flatMap((user) => {\n        return Observable.fromPromise(\n          this.itemsCol(user.uid)\n            .doc(item.id)\n            .set(item)\n        )\n      });\n  }\n\n  public addSubItem(item: Item, sub: SubItem): Observable<void> {\n    return this.user()\n      .flatMap((user) => {\n        return Observable.fromPromise(\n          this.subItemsCol(user.uid, item)\n            .doc(sub.id)\n            .set(sub)\n        )\n      });\n  }\n\n  private deleteItem(item: Item): Observable<void> {\n    return this.user()\n      .flatMap((user) => {\n        return Observable.fromPromise(\n          this.itemsCol(user.uid)\n            .doc(item.id)\n            .delete()\n        )\n      });\n  }\n\n  private deleteItemSubItems(item: Item): Observable<void> {\n    return this.subItemsSnap(item)\n      .first()\n      .flatMap((snaps) => {\n        let batch = this.storage.firestore.batch();\n        snaps.filter((snap) => { return snap.type != \"removed\" })\n          .map((snap) => { return snap.payload.doc.ref })\n          .forEach((item) => { batch.delete(item) });\n        return Observable.fromPromise(batch.commit());\n      })\n  }\n\n  public removeItem(item: Item): Observable<void> {\n    return this.deleteItemSubItems(item).concat(this.deleteItem(item));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/list/list.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule, ErrorHandler } from '@angular/core';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { MyApp } from './app.component';\n\nimport { ListPage } from '../pages/list/list';\n\nimport { config } from './app.firebaseconfig';\n\nimport { AngularFireModule } from 'angularfire2';\nimport { AngularFireAuthModule } from 'angularfire2/auth';\nimport { AngularFirestoreModule } from 'angularfire2/firestore';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n@NgModule({\n  declarations: [\n    MyApp,\n    ListPage\n  ],\n  imports: [\n    BrowserModule,\n    IonicModule.forRoot(MyApp),\n    AngularFireModule.initializeApp(config),\n    AngularFireAuthModule,\n    AngularFirestoreModule.enablePersistence()\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    ListPage\n  ],\n  providers: [\n    StatusBar,\n    SplashScreen,\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, ViewChild } from '@angular/core';\n\nimport { Platform, Nav } from 'ionic-angular';\nimport { ListPage } from '../pages/list/list';\n\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\n\n\n@Component({\n  templateUrl: 'app.html'\n})\nexport class MyApp {\n  @ViewChild(Nav) nav: Nav;\n\n  rootPage = ListPage;\n\n  constructor(\n    public platform: Platform,\n    public statusBar: StatusBar,\n    public splashScreen: SplashScreen\n  ) {\n    this.initializeApp();\n\n  }\n\n  initializeApp() {\n    this.platform.ready().then(() => {\n      // Okay, so the platform is ready and our plugins are available.\n      // Here you can do any higher level native things you might need.\n      this.statusBar.styleDefault();\n      this.splashScreen.hide();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","export var config = { \r\n    apiKey: \"AIzaSyDusHwXTB7cqY-bJWDIAopkOR18PFEWP6o\",\r\n    authDomain: \"test1-ad002.firebaseapp.com\",\r\n    databaseURL: \"https://test1-ad002.firebaseio.com\",\r\n    projectId: \"test1-ad002\",\r\n    storageBucket: \"test1-ad002.appspot.com\",\r\n    messagingSenderId: \"554540938006\"\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.firebaseconfig.ts"],"sourceRoot":""}